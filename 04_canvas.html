<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Gulp Starter Environment</title>
</head>
<body>

<h1>Canvas Filter Grayscale</h1>

<canvas id="canvas-grey" width="600" height="3000"></canvas>

<script>
    function drawImage(imageObj) {
      var canvas = document.getElementById('canvas-grey');
      var context = canvas.getContext('2d');
      var x = 0;
      var y = 0;

      context.drawImage(imageObj, x, y+(300*0));
      context.drawImage(imageObj, x, y+(300*1));
      context.drawImage(imageObj, x, y+(300*2));
      context.drawImage(imageObj, x, y+(300*3));
      context.drawImage(imageObj, x, y+(300*4));
      context.drawImage(imageObj, x, y+(300*5));
      context.drawImage(imageObj, x, y+(300*6));
      context.drawImage(imageObj, x, y+(300*7));
      context.drawImage(imageObj, x, y+(300*8));
      context.drawImage(imageObj, x, y+(300*9));
      context.drawImage(imageObj, x, y+(300*10));

      var imageData = context.getImageData(x, y, imageObj.width, imageObj.height);
      var data = imageData.data;

      for(var i = 0; i < data.length; i += 4) {
        var brightness = 0.34 * data[i] + 0.5 * data[i + 1] + 0.16 * data[i + 2];
        // red
        data[i] = brightness;
        // green
        data[i + 1] = brightness;
        // blue
        data[i + 2] = brightness;
      }

      // overwrite original image
      context.putImageData(imageData, x, y);
      context.putImageData(imageObj, x, y+(300*1));
      context.putImageData(imageObj, x, y+(300*2));
      context.putImageData(imageObj, x, y+(300*3));
      context.putImageData(imageObj, x, y+(300*4));
      context.putImageData(imageObj, x, y+(300*5));
      context.putImageData(imageObj, x, y+(300*6));
      context.putImageData(imageObj, x, y+(300*7));
      context.putImageData(imageObj, x, y+(300*8));
      context.putImageData(imageObj, x, y+(300*9));
      context.putImageData(imageObj, x, y+(300*10));
    }

    var imageObj = new Image();
    imageObj.onload = function() {
      drawImage(this);
    };

    imageObj.src = './img/bird.jpg';
  </script>

  <!-- <a href="http://www.html5canvastutorials.com/advanced/html5-canvas-grayscale-image-colors-tutorial/">source</a> -->

</body>
</html>